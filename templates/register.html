<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Join Us</title>
    <meta content="" name="description">
    <link rel="shortcut icon" href="img/favicon/favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/libs.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/notifications.css') }}"/>
</head>

<body>
    <div class="content_layout">
        <div class="container">
            <div class="wrap_full divTable wrap_entry">
                <div class="divTableRow">
                    <div class="divTableCell">
                        <h2>Новый пользователь</h2>
                        <div class="wrap_form_entry">
                            <form action="" method="post">
                                <div class="wrap_input">
                                    <input type="text" name="email" placeholder="Почта">
                                </div>
                                <div class="wrap_input">
                                    <input type="password" name="password" placeholder="Пароль">
                                </div>
                                <div class="wrap_input">
                                    <input type="password" name="password_again" placeholder="Пароль ещё раз">
                                </div>
                                <div class="agreement">Я согласен с <a href="/tos">правилами сервиса</a></div>
                                <div class="wrap_button">
                                    <button class="btn" type="submit">Регистрация</button>
                                </div>
                                <a class="check" href="/login">Вход</a>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="hide">
        <div class="overlay"></div>
        <div class="wrap_mess">
            <div class="wrapper">
                <div class="message">Письмо для активации аккаунта отправлено на почту</div>
                <a class="btn close" href="#">ок</a>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/common.js') }}"></script>
    {% if email_taken %}
        <script src="{{ url_for('static', filename='js/notifications.js') }}" type="text/javascript"></script>
        <script>
            window.addEventListener('DOMContentLoaded', function () {
                window.createNotification({
                    closeOnClick: true,
                    displayCloseButton: false,
                    positionClass: "nfc-bottom-right",
                    showDuration: 3000,
                    theme: "error" // "success", "info", "warning", "error", "none"
                })({
                    title: "Не удалось зарегистрироваться",
                    message: "Эта почта уже занята"
                });
            });
        </script>
    {% endif %}
    {% if email_invalid %}
        <script src="{{ url_for('static', filename='js/notifications.js') }}" type="text/javascript"></script>
        <script>
            window.addEventListener('DOMContentLoaded', function () {
                window.createNotification({
                    closeOnClick: true,
                    displayCloseButton: false,
                    positionClass: "nfc-bottom-right",
                    showDuration: 3000,
                    theme: "error" // "success", "info", "warning", "error", "none"
                })({
                    title: "Не удалось зарегистрироваться",
                    message: "Такой почты не существует"
                });
            });
        </script>
    {% endif %}
    {% if password_invalid %}
        <script src="{{ url_for('static', filename='js/notifications.js') }}" type="text/javascript"></script>
        <script>
            window.addEventListener('DOMContentLoaded', function () {
                window.createNotification({
                    closeOnClick: true,
                    displayCloseButton: false,
                    positionClass: "nfc-bottom-right",
                    showDuration: 3000,
                    theme: "error" // "success", "info", "warning", "error", "none"
                })({
                    title: "Не удалось зарегистрироваться",
                    message: "Пароль должен быть не меньше 8 символов и содержать буквы, цифры, спецсимволы"
                });
            });
        </script>
    {% endif %}
    {% if passwords_nomatch %}
        <script src="{{ url_for('static', filename='js/notifications.js') }}" type="text/javascript"></script>
        <script>
            window.addEventListener('DOMContentLoaded', function () {
                window.createNotification({
                    closeOnClick: true,
                    displayCloseButton: false,
                    positionClass: "nfc-bottom-right",
                    showDuration: 3000,
                    theme: "error" // "success", "info", "warning", "error", "none"
                })({
                    title: "Не удалось зарегистрироваться",
                    message: "Введённые пароли не совпадают"
                });
            });
        </script>
    {% endif %}
    {% if registration_success %}
        <script src="{{ url_for('static', filename='js/notifications.js') }}" type="text/javascript"></script>
        <script>
            window.addEventListener('DOMContentLoaded', function () {
                window.createNotification({
                    closeOnClick: true,
                    displayCloseButton: false,
                    positionClass: "nfc-bottom-right",
                    showDuration: 3000,
                    theme: "success" // "success", "info", "warning", "error", "none"
                })({
                    title: "Вы зарегистрированы",
                    message: "Проверьте, пожалуйста, почту"
                });
            });
        </script>
    {% endif %}
    <script>
        window.intercomSettings = {
            app_id: "q5s6lmcp"
        };
    </script>

    <script>
        // We pre-filled your app ID in the widget URL: 'https://widget.intercom.io/widget/q5s6lmcp'
        (function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/q5s6lmcp';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
    </script>
</body>

</html>